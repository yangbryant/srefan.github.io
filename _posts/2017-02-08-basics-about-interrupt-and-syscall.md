---
layout: post
title: 操作系统基础(二) -- 中断和系统调用
date: 2017-02-08 11:28:00 +08:00
author: Srefan
catalog: true
tags:
    - 入门
    - 操作系统
---

***

#### 操作系统基础:

[操作系统基础(一) -- 数据单元][arch]  
[操作系统基础(二) -- 中断和系统调用][interrupt_and_syscall]  
[操作系统基础(三) -- 并发技术][concurrency]  
[操作系统基础(四) -- 内存管理基础][memory_management]  
[操作系统基础(五) -- 磁盘与文件][disk_and_file]  

***

### 操作系统提供的服务

* 操作系统的五大功能,分别为: **作业管理**, **文件管理**, **存储管理**, **输入输出设备管理**, **进程及处理机管理**.

***

### 中断

* 在计算机执行程序的过程中,由于出现了特殊事件,使得 **CPU暂停对当前程序的执行** ,转而 **去执行处理另一事件的程序** ,等 **处理完之后** 再 **回去执行之前的程序**.
* 中断一般分为三类:
1. 由 **计算机硬件异常或故障** 引起的中断, 称为**内部异常中断**.
2. 由 **程序中执行了引起中断的指令** 而造成的中断,称为 **软中断** (这也是与 **系统调用** 相关的中断).
3. 由 **外部设备请求引起的中断** ,称为外部中断.
* 与中断紧密相连的一个概念就是 **中断处理程序**. 中断发生时,系统需要去对中断进行处理,对中断的处理是由操作系统内核中的特定函数进行的,处理中断的特定的函数就是中断处理程序.
* 与中断紧密相连的另一个概念就是 **中断的优先级**. 中断的优先级说明的是当一个中断正在被处理的时候,处理器能接受的 **中断的级别**. 中断的优先级也表明了中断需要被处理的紧急程度. 每个中断都有一个对应的优先级,当处理器在处理某一中断的时候,只有比这个中断优先级高的中断可以被处理器接受并且被处理,优先级比这个当前正在被处理的中断优先级要低的中断将会被忽略.

```plain
典型的中断优先级如下所示:
机器错误 > 时钟 > 磁盘 > 网络设备 >  终端 > 软件中断
```

***

### 系统调用

* 进程的执行在系统上的两个级别:
1. **用户级** : 也叫 **用户态(User Mode)**.
2. **核心级** : 也叫 **系统态(Kernel Mode)**.
* 在系统中内核并不是作为一个与用户进程平行的进程的集合,内核是为用户进程运行的.

* 程序的执行一般是在 **用户态下执行** 的,但当程序需要 **使用操作系统提供的服务** 时,比如说 **打开某一设备**, **创建文件**, **读写文件**等,就需要 **向操作系统发出调用服务的请求** ,这就是**系统调用**.
* Linux系统有 **专门的函数库** 来提供这些请求操作系统服务的入口,这个函数库中包含了操作系统所提供的对外服务的接口.
* 当进程发出系统调用之后,它所处的运行状态就会 **由用户态变成核心态**.
* 此时,进程本身其实并没有做什么事情,是 **由内核在做相应的操作**,去完成进程所提出的这些请求.

* 系统调用和中断的关系: 当进程发出系统调用申请时,会产生一个软件中断.产生这个软件中断后,系统会去对这个软中断进行处理,这个时候进程就处于核心态了.

* 用户态和核心态之间的区别:
1. 用户态的进程能存取自己的指令和数据,但不能存取内核指令和数据(或其他进程的指令和数据).然而,核心态下的进程能够存取内核和用户地址.
2. 某些机器指令是特权指令,在用户态下执行特权指令会引起错误.

***

此文参考于 [hit-alibaba.github.io][hit-alibaba.github.io],十分感谢.  
所有引用内容版权归原作者所有.  
使用 [知识共享“署名-非商业性使用-相同方式共享 3.0 中国大陆”许可协议][Lisence] 授权.

[hit-alibaba.github.io]: https://hit-alibaba.github.io/interview/
[Lisence]: https://creativecommons.org/licenses/by-nc-sa/3.0/cn/

[arch]: /2017/02/basics-about-arch/ 'arch'
[interrupt_and_syscall]: /2017/02/basics-about-interrupt-and-syscall/ 'interrupt_and_syscall'
[concurrency]: /2017/02/basics-about-concurrency/ 'concurrency'
[memory_management]: /2017/02/basics-about-memory-management/ 'memory_management'
[disk_and_file]: /2017/02/basics-about-disk-and-file/ 'disk_and_file'