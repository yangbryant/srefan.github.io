---
layout: post
title: 计算机网络基础(三) -- IP协议
date: 2017-01-26 11:00:59 +08:00
author: Srefan
catalog: true
tags:
    - 入门
    - Http
---

***

#### 计算机网络基础:

[计算机网络基础(一) -- HTTP协议][http_basic]  
[计算机网络基础(二) -- TCP协议][tcp_basic]  
[计算机网络基础(三) -- IP协议][ip_basic]  
[计算机网络基础(四) -- Socket编程实例][socket_programming]  

***

### IP 协议

#### 	IP地址分类

* IP地址 = 网络ID + 主机ID.
* 最初设计互联网络,为了便于寻址和层次化构造网络,每个IP地址包含2个标识码(网络ID和主机ID),同一个物理网络上所有主机使用同一个网络ID,网络上一个主机有一个主机ID.
* ID地址根据网络ID不同,分为 A, B, C, D, E 5类地址.

| 地址类别 | 地址范围 | 默认网络掩码 | 网络ID最高位 | 网络ID | 主机ID | 用途 | 私有地址 | 保留地址 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| A类地址 | 1.0.0.1~126.255.255.254 | 255.0.0.0 | 0 | 1Byte | 3Byte | 政府机关 | 10.0.0.0~10.255.255.255 | 127.x.x.x |
| B类地址 | 128.0.0.1~191.255.255.254 | 255.255.0.0 | 10 | 2Byte | 2Byte | 大中型企业 | 172.16.0.0~172.31.255.255 | 169.254.x.x |
| C类地址 | 192.0.0.1~223.255.255.254 | 255.255.255.0 | 110 | 3Byte | 1Byte | 个人 | 192.168.0.0~192.168.255.255 | |
| D类地址 | 224.0.0.1~239.255.255.254 | | 1110 | | | 组播 | | |
| E类地址 | 240.0.0.1~255.255.255.254 | | 11110 | | | 保留 | | |

* 私有地址是指在互联网中不使用,而被用在局域网络中的地址.
* 127.x.x.x是A类地址的保留地址,用作 **循环测试**.
* 169.254.x.x是B类地址的保留地址,用作 **自动获取IP,却找不到DHCP服务器** 时, 分配其中IP.
* 240.0.0.0 ~ 255.255.255.254是E类地址的保留地址,用作 **Internet试验和开发**.
* 255.255.255.255是广播地址, 0.0.0.0是当前主机地址.

#### 广播与多播

* 广播与多播仅用于 **UDP**. (TCP是面向连接的).

* 广播有4种广播地址:
1. **受限的广播**: 地址为 **255.255.255.255**,用于主机配置过程中IP数据报的目的地址,路由不转发目的地址为255.255.255.255的数据报,仅在本地网络中使用.
2. **指向网络的广播**: 地址为 **主机ID全为1** 的地址. 例如: A类网络广播地址: NetID.255.255.255,(NetID为A类网络的网络号). 一个路由必须转发指向网络的广播,但也必须有一个不进行转发的选择.
3. **指向子网的广播**: 地址为 **主机ID全为1且有特定子网号** 的地址.作为子网直接广播地址的IP地址需要了解子网的掩码. 例如: 路由收到128.1.2.255的数据报,若B类网络128.1的掩码为255.255.255.0,该地址就是指向子网的广播地址,但如果掩码为255.255.254.0,该地址就不是指向子网的广播地址.
4. **指向所有子网的广播**: 地址为 **子网号和主机号为全1** 的地址. 这种广播是陈旧过时的,更好的方式是使用多播而不是对所有子网的广播.

* 多播, 又叫 **组播**, D类地址的 **低28位** 用来多播组号.多播组地址包含高4位 **1110** 和低28位 **多播组号**.范围为 224.0.0.0 ~ 239.255.255.255.
* 多播减少了对与应用无关主机的处理负荷.
* 多播特点:
1. 允许一个或多个发送者(组播源)发送单一数据报到多个接受者.
2. 节省网络带宽.
3. 在节省网络资源的前提下保证服务质量.

#### BGP

* 边界网关协议(BGP)是运行于TCP上一种自治系统的路由协议.
* BGP是唯一一个用来处理像因特网大小的网络协议,也是唯一能够妥善处理好不相关路由域间的多路连接的协议.
* BGP是一种外部网关协议(Exterior Gateway Protocol,EGP),与OSPF,RIP等内部网关协议(Interior Gateway Protocol,IGP)不同,BGP不在于发现和计算路由,而在于控制路由的传播和选择最佳路由.
* BGP使用TCP作为其传输层协议(端口号179),提高了协议的可靠性.
* BGP既不是纯粹的矢量距离协议,也不是纯粹的链路状态协议.
* BGP支持CIDR(Classless Inter-Domain Routing,无类别域间路由).
* 路由更新时,BGP只发送更新的路由,大大减少了BGP传播路由所占用的带宽,适用于在Internet上传播大量的路由信息.
* BGP路由通过携带AS路径信息彻底解决路由环路问题.
* BGP提供了丰富的路由策略,能够对路由实现灵活的过滤和选择.
* BGP易于扩展,能够适应网络新的发展.

***

此文参考于 [hit-alibaba.github.io][hit-alibaba.github.io],十分感谢.  
所有引用内容版权归原作者所有.  
使用 [知识共享“署名-非商业性使用-相同方式共享 3.0 中国大陆”许可协议][Lisence] 授权.

[hit-alibaba.github.io]: https://hit-alibaba.github.io/interview/
[Lisence]: https://creativecommons.org/licenses/by-nc-sa/3.0/cn/

[http_basic]: /2017/01/basics-about-network-1-http/
[tcp_basic]: /2017/01/basics-about-network-2-tcp/
[ip_basic]: /2017/01/basics-about-network-3-ip/
[socket_programming]: /2017/01/basics-about-network-4-socket-programming/